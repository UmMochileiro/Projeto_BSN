import{a as Z,b as D}from"./chunk-DYYB6MAR.js";import{$ as H,B as P,C,E as F,F as j,G as A,H as B,N as z,T as V,Z as L,_ as $,aa as N,ba as R,ca as U,da as Y,e as k,ea as q,f as b,fa as G,g as S,h as l,i as x,j as w,k as M,la as J,o as f,p as r,q as s,qa as K,r as _,ra as Q,s as E,t as y,ta as W,u,ua as X,w as h,x as I,y as T}from"./chunk-KEGYBPVN.js";import"./chunk-G5DBTQCY.js";import"./chunk-4G7SAIE5.js";import"./chunk-LRSHVU3G.js";import"./chunk-473DEPGT.js";import"./chunk-CKIBZVXW.js";import"./chunk-PS2NURIG.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-6MDLUQIX.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-RW4GY4BD.js";function te(a,c){if(a&1&&_(0,"img",10),a&2){let o=u().$implicit;f("src",o.image||"assets/default.png",S)("alt",o.name||"Pokemon image")}}function ne(a,c){if(a&1){let o=E();r(0,"ion-card",5),y("click",function(){let n=k(o).$implicit,m=u();return b(m.verDetalhes(n))}),r(1,"div",6),M(2,te,1,2,"img",7),r(3,"ion-button",8),y("click",function(n){let m=k(o).$implicit;return u().toggleFavorito(m),b(n.stopPropagation())}),_(4,"ion-icon",9),s()(),r(5,"ion-card-header")(6,"ion-card-title"),h(7),P(8,"titlecase"),s(),r(9,"ion-card-subtitle"),h(10),P(11,"titlecase"),s()(),r(12,"ion-card-content")(13,"p"),h(14),P(15,"titlecase"),s()()()}if(a&2){let o=c.$implicit,t=u();l(2),f("ngIf",o.image),l(2),f("name",o.favorito?"star-sharp":"star-outline"),l(3),I(C(8,5,o.name)),l(3),T("Tipo: ",C(11,7,t.types(o))),l(4),I(C(15,9,o.description))}}var fe=(()=>{let c=class c{constructor(t,n,m){this.pokemonService=t,this.favoritosService=n,this.router=m,this.pokemons=[],this.pokemonsID=[],this.apiUrl="https://pokeapi.co/api/v2/",this.favoritos=[],this.favoritosService.favoritos.subscribe(p=>{this.favoritos=p,this.pokemons.forEach(v=>{v.favorito=this.favoritos.some(e=>e.name===v.name)})}),this.pokemonService.getPokemons().subscribe({next:p=>{this.pokemons=Array.isArray(p==null?void 0:p.results)?p.results.map(e=>({name:e.name,url:e.url,favorito:!1,types:[],image:"",description:""})):[];let v=this.favoritosService.getFavoritosList();this.pokemons.forEach(e=>{e.favorito=v.some(i=>i.name===e.name)}),this.pokemons.forEach(e=>{this.pokemonService.getPokemonTypes(e.name).subscribe({next:i=>{var g,d,O;e.types=Array.isArray(i.types)?i.types.map(ee=>ee.type.name):[],e.image=((O=(d=(g=i==null?void 0:i.sprites)==null?void 0:g.other)==null?void 0:d["official-artwork"])==null?void 0:O.front_default)||""},error:()=>{e.types=[],e.image=""}}),this.pokemonService.getPokemonSpecies(e.name).subscribe({next:i=>{let g=Array.isArray(i.flavor_text_entries)?i.flavor_text_entries.find(d=>d.language.name==="pt")||i.flavor_text_entries.find(d=>d.language.name==="en"):null;e.description=g?g.flavor_text.replace(/\f/g," "):"Sem descri\xE7\xE3o"},error:()=>{e.description="Sem descri\xE7\xE3o"}})})},error:()=>{this.pokemons=[]}})}types(t){return t.types?t.types.join(", "):"Carregando..."}toggleFavorito(t,n){n&&n.stopPropagation(),t.favorito=!t.favorito}verDetalhes(t){this.router.navigate(["/pagina/pokemon-detalhes",t.name])}};c.\u0275fac=function(n){return new(n||c)(x(Z),x(D),x(z))},c.\u0275cmp=w({type:c,selectors:[["app-pokemons"]],decls:10,vars:1,consts:[["slot","start","color","primary"],["color","primary"],["placeholder","Procurar Pok\xE9mon"],[1,"pokemon-grid"],["class","pokemon-card",3,"click",4,"ngFor","ngForOf"],[1,"pokemon-card",3,"click"],[1,"image-container"],[3,"src","alt",4,"ngIf"],["fill","clear",1,"favorite-button",3,"click"],["slot","icon-only","color","warning",3,"name"],[3,"src","alt"]],template:function(n,m){n&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),_(3,"ion-menu-button",1),s(),r(4,"ion-title"),h(5,"Pok\xE9mons"),s()()(),r(6,"ion-content"),_(7,"ion-searchbar",2),r(8,"div",3),M(9,ne,16,11,"ion-card",4),s()()),n&2&&(l(9),f("ngForOf",m.pokemons))},dependencies:[W,L,X,H,N,R,U,Y,G,Q,$,J,K,q,B,F,j,A,V],styles:[".pokemon-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(22%,1fr));gap:10px;padding:10px}.pokemon-card[_ngcontent-%COMP%]{width:100%;margin:0;height:100%}.pokemon-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:150px;object-fit:contain;padding:10px;background-color:transparent}.pokemon-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding:10px}.pokemon-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1rem}.pokemon-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{font-size:.8rem}.pokemon-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{max-height:120px;overflow:auto;padding:10px;font-size:.8rem}@media (max-width: 768px){.pokemon-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 480px){.pokemon-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.pokemon-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{position:relative;width:100%}.pokemon-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:150px;object-fit:contain;padding:10px;background-color:transparent}.pokemon-card[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .favorite-button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;--padding-start: 4px;--padding-end: 4px;--padding-top: 4px;--padding-bottom: 4px;--box-shadow: none;z-index:10}.pokemon-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s,box-shadow .2s}.pokemon-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 4px 8px #0000001a}"]});let a=c;return a})();export{fe as PokemonsPage};
